<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Neon Flappy ‚Äì SpinnerRealYT Games</title>

<link rel="icon" type="image/png" href="../Logo.png?v=2">
<link rel="apple-touch-icon" href="../Logo.png?v=2">

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --accent:#38bdf8;
  --text:#e5e7eb;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:radial-gradient(circle at top,#020617,#000);
  color:var(--text);
  user-select: none;
  overflow-x: hidden;
}

/* NAG≈Å√ìWEK IDENTYCZNY JAK W SAPERZE */
header{
  display:flex; align-items:center; gap:15px; padding:15px 20px;
  background:rgba(15,23,42,.9); backdrop-filter:blur(10px);
  position:sticky; top:0; z-index:100;
}
header img{height:32px}
nav button{
  background:none; border:none; color:var(--text); font-size:15px;
  padding:8px 14px; border-radius:10px; cursor:pointer;
}
nav button:hover{ background:rgba(56,189,248,.15); color:var(--accent); }

main{ max-width: 600px; margin:auto; padding:10px; }

/* KARTA GRY */
.card{
  background:linear-gradient(180deg,#0f172a,#020617);
  border-radius:20px; padding:15px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
  position: relative;
}
h2{text-align:center; margin-top:0;}

#ui-score {
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
    color: var(--accent);
}

/* KONTENER CANVAS */
#game-wrapper {
    position: relative;
    width: fit-content;
    margin: 10px auto;
}

canvas {
    background: #000;
    border-radius: 12px;
    display: block;
    border: 2px solid var(--accent);
    cursor: pointer;
    max-width: 100%;
    height: auto;
}

/* OVERLAY MENU WYBORU */
#overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(15, 23, 42, 0.95);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10;
}

.diff-btn {
    background: var(--card);
    border: 1px solid var(--accent);
    color: var(--accent);
    padding: 10px 20px;
    margin: 5px;
    border-radius: 10px;
    cursor: pointer;
    width: 160px;
    font-weight: bold;
    transition: 0.2s;
}
.diff-btn:active { transform: scale(0.95); }

/* STOPKA IDENTYCZNA */
footer { text-align:center; opacity:.6; padding:20px; font-size: 12px;}
</style>
</head>
<body>

<header>
  <img src="../Logo.png" alt="SpinnerRealYT">
  <nav><button onclick="location.href='../index.html'">Menu</button></nav>
</header>

<main>
  <div class="card">
    <h2>üöÄ Neon Flappy</h2>
    <div id="ui-score">Score: 0 | Best: <span id="high-score">0</span></div>
    
    <div id="game-wrapper">
        <canvas id="game" width="320" height="480"></canvas>
        
        <div id="overlay">
            <h3 id="msg">Wybierz Poziom</h3>
            <button class="diff-btn" onclick="startGame('amator')">AMATOR</button>
            <button class="diff-btn" onclick="startGame('latwy')">≈ÅATWY</button>
            <button class="diff-btn" onclick="startGame('sredni')">≈öREDNI</button>
            <button class="diff-btn" onclick="startGame('trudny')">TRUDNY</button>
        </div>
    </div>

    <div style="text-align:center; margin-top:10px; font-size: 13px; opacity: 0.7;">
        Klikaj lub Space, aby skoczyƒá
    </div>
  </div>
</main>

<footer>¬© 2026 SpinnerRealYT Games</footer>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("ui-score");
const highScoreEl = document.getElementById("high-score");
const overlay = document.getElementById("overlay");
const msg = document.getElementById("msg");

let bird = { x: 50, y: 240, w: 24, h: 24, dy: 0 };
let pipes = [];
let score = 0;
let gameOver = true;
let frame = 0;
let highScore = localStorage.getItem("flappy_high") || 0;
highScoreEl.textContent = highScore;

const config = {
    amator: { gravity: 0.35, jump: -6.5, gap: 170, speed: 2, pipeFreq: 110 },
    latwy:  { gravity: 0.45, jump: -7.5, gap: 150, speed: 2.5, pipeFreq: 95 },
    sredni: { gravity: 0.55, jump: -8.5, gap: 135, speed: 3, pipeFreq: 85 },
    trudny: { gravity: 0.65, jump: -9.5, gap: 120, speed: 3.8, pipeFreq: 75 }
};
let cur = config.sredni;

function startGame(diff) {
    cur = config[diff];
    bird.y = 240;
    bird.dy = 0;
    pipes = [];
    score = 0;
    frame = 0;
    gameOver = false;
    overlay.style.display = "none";
    loop();
}

function input() { if(!gameOver) bird.dy = cur.jump; }
window.addEventListener("keydown", (e) => { if(e.code === "Space") { e.preventDefault(); input(); } });
canvas.addEventListener("touchstart", (e) => { e.preventDefault(); input(); });
canvas.addEventListener("mousedown", input);

function loop() {
    if(gameOver) return;

    ctx.fillStyle = "#000";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Ptak
    bird.dy += cur.gravity;
    bird.y += bird.dy;
    ctx.fillStyle = "#38bdf8";
    ctx.shadowBlur = 10; ctx.shadowColor = "#38bdf8";
    ctx.fillRect(bird.x, bird.y, bird.w, bird.h);
    ctx.shadowBlur = 0;

    // Rury
    if(frame % cur.pipeFreq === 0) {
        let gapY = Math.random() * (canvas.height - cur.gap - 100) + 50;
        pipes.push({ x: canvas.width, y: gapY, passed: false });
    }

    for(let i = pipes.length - 1; i >= 0; i--) {
        let p = pipes[i];
        p.x -= cur.speed;

        ctx.fillStyle = "#1e293b";
        ctx.strokeStyle = "#38bdf8";
        ctx.lineWidth = 2;
        
        // G√≥ra
        ctx.fillRect(p.x, 0, 50, p.y);
        ctx.strokeRect(p.x, -2, 50, p.y + 2);
        
        // D√≥≈Ç
        ctx.fillRect(p.x, p.y + cur.gap, 50, canvas.height);
        ctx.strokeRect(p.x, p.y + cur.gap, 50, canvas.height - (p.y + cur.gap) + 2);

        // Kolizje
        if (bird.x < p.x + 50 && bird.x + bird.w > p.x && (bird.y < p.y || bird.y + bird.h > p.y + cur.gap)) {
            die();
        }
        if (!p.passed && p.x + 50 < bird.x) {
            score++;
            p.passed = true;
        }
        if (p.x < -60) pipes.splice(i, 1);
    }

    if(bird.y + bird.h > canvas.height || bird.y < 0) die();

    scoreEl.innerHTML = `Score: ${score} | Best: ${highScore}`;
    frame++;
    requestAnimationFrame(loop);
}

function die() {
    gameOver = true;
    if(score > highScore) {
        highScore = score;
        localStorage.setItem("flappy_high", highScore);
        highScoreEl.textContent = highScore;
    }
    msg.textContent = "Koniec! Wynik: " + score;
    overlay.style.display = "flex";
}
</script>
</body>
</html>
