<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saper â€“ SpinnerRealYT Games</title>
<link rel="icon" href="../Logo.png">

<style>
:root{
--bg:#020617;
--card:#0f172a;
--accent:#38bdf8;
--text:#e5e7eb;
}
*{box-sizing:border-box}
body{
margin:0;
font-family:Inter,system-ui,sans-serif;
background:radial-gradient(circle at top,#020617,#000);
color:var(--text);
}
header{
display:flex;
align-items:center;
gap:15px;
padding:15px 20px;
background:rgba(15,23,42,.9);
backdrop-filter:blur(10px);
position:sticky;
top:0;
z-index:100;
}
header img{height:42px}
nav button{
background:none;
border:none;
color:var(--text);
font-size:15px;
padding:8px 14px;
border-radius:10px;
cursor:pointer;
}
nav button:hover,
nav button.active{
background:rgba(56,189,248,.15);
color:var(--accent);
}
main{max-width:1100px;margin:auto;padding:25px}
.card{
background:linear-gradient(180deg,#0f172a,#020617);
border-radius:20px;
padding:20px;
box-shadow:0 20px 60px rgba(0,0,0,.6);
margin-bottom:25px;
}
h1,h2{text-align:center}
footer{
text-align:center;
opacity:.6;
padding:25px 10px;
}

/* SAPER */
#game{
display:grid;
justify-content:center;
margin:15px auto;
gap:2px;
background:#020617;
touch-action:none;
}
.cell{
background:#334155;
display:flex;
justify-content:center;
align-items:center;
cursor:pointer;
user-select:none;
font-weight:700;
border-radius:5px;
}
.open{background:#e5e7eb;color:#020617}
.mine{background:#dc2626;color:white}
.flagged{background:#facc15;color:#020617}
.number1{color:#2563eb}
.number2{color:#16a34a}
.number3{color:#dc2626}
.number4{color:#1e3a8a}
.number5{color:#7c2d12}
.number6{color:#0f766e}
.number7{color:black}
.number8{color:#4b5563}
input,button{
background:#020617;
color:white;
border:1px solid #334155;
border-radius:10px;
padding:6px 10px;
margin:4px;
}
button{cursor:pointer}
</style>
</head>

<body>

<header>
<img src="../Logo.png" alt="SpinnerRealYT">
<nav id="nav"></nav>
</header>

<main>

<div class="card">
<h2>ðŸ’£ Saper</h2>

<div id="menu">
Rozmiar:
<input type="number" id="grid-size" value="9" min="5" max="100">
Bomby:
<input type="number" id="bomb-count" value="10" min="5">
<button id="start-btn">Start</button>
<button id="reset-btn">Reset</button>
<button id="mode-toggle">Flag Mode: OFF</button>
<button id="hint-btn">Hint (1 free)</button>
<div id="info">Flags: 0 / 0</div>
<div id="points-info">Points: 0 | Hints: 1</div>
</div>

<div id="game"></div>

<div>
<button id="btn-open">OtwÃ³rz</button>
<button id="btn-flag">Flaga</button>
</div>

</div>

</main>

<footer>
Â© 2026 SpinnerRealYT Games
</footer>

<script>
/* ===== MENU ===== */
const games = [
  { file: "../index.html", name: "Menu" },
  { file: "saper.html", name: "Saper" },
  { file: "quiz.html", name: "Quiz" },
  { file: "polls.html", name: "SondaÅ¼e" }
];

const nav = document.getElementById("nav");

games.forEach(g=>{
  const b=document.createElement("button");
  b.textContent=g.name;
  if(g.name==="Saper") b.classList.add("active");
  b.onclick=()=>location.href=g.file;
  nav.appendChild(b);
});
</script>

<!-- ===== SAPER SCRIPT (1:1) ===== -->
<script>
(() => {
let ROWS=9,COLS=9,MINES_COUNT=10;
const gameEl=document.getElementById('game');
const infoEl=document.getElementById('info');
const modeToggleBtn=document.getElementById('mode-toggle');
const resetBtn=document.getElementById('reset-btn');
const startBtn=document.getElementById('start-btn');
const gridSizeInput=document.getElementById('grid-size');
const bombCountInput=document.getElementById('bomb-count');
const btnOpen=document.getElementById('btn-open');
const btnFlag=document.getElementById('btn-flag');
const pointsInfoEl=document.getElementById('points-info');

let cells=[],minePositions=new Set(),flags=new Set(),opened=new Set();
let gameOver=false,flagMode=false,firstClick=true,points=0,hints=1;

function updatePointsInfo(){
pointsInfoEl.textContent=`Points: ${points} | Hints: ${hints}`;
}

function createGrid(){
gameEl.innerHTML='';
cells=[];
const size=Math.floor(Math.min(420/COLS,420/ROWS));
gameEl.style.gridTemplateColumns=`repeat(${COLS},${size}px)`;
for(let i=0;i<ROWS*COLS;i++){
const c=document.createElement('div');
c.className='cell';
c.dataset.index=i;
c.style.width=c.style.height=size+'px';
c.style.fontSize=Math.floor(size*0.6)+'px';
gameEl.appendChild(c);
cells.push(c);
}
}

function neighbors(i){
const r=Math.floor(i/COLS),c=i%COLS,res=[];
for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){
if(!dr&&!dc)continue;
const nr=r+dr,nc=c+dc;
if(nr>=0&&nr<ROWS&&nc>=0&&nc<COLS)res.push(nr*COLS+nc);
}
return res;
}

function placeMines(first){
minePositions.clear();
while(minePositions.size<MINES_COUNT){
const p=Math.floor(Math.random()*ROWS*COLS);
if(p===first||neighbors(first).includes(p))continue;
minePositions.add(p);
}
}

function countMines(i){
return neighbors(i).filter(n=>minePositions.has(n)).length;
}

function openCell(i){
if(gameOver||opened.has(i)||flags.has(i))return;
if(firstClick){firstClick=false;placeMines(i);}
opened.add(i);
const c=cells[i];
c.classList.add('open');
if(minePositions.has(i)){
c.textContent='ðŸ’£';
c.classList.add('mine');
return lose();
}
const n=countMines(i);
if(n){c.textContent=n;c.classList.add(`number${n}`);}
else neighbors(i).forEach(openCell);
checkWin();
}

function toggleFlag(i){
if(gameOver||opened.has(i))return;
const c=cells[i];
if(flags.has(i)){flags.delete(i);c.textContent='';c.classList.remove('flagged');}
else if(flags.size<MINES_COUNT){flags.add(i);c.textContent='ðŸš©';c.classList.add('flagged');}
infoEl.textContent=`Flags: ${flags.size} / ${MINES_COUNT}`;
checkWin();
}

function lose(){
gameOver=true;
infoEl.textContent='ðŸ’¥ Game Over';
minePositions.forEach(i=>{
if(!opened.has(i)){
cells[i].textContent='ðŸ’£';
cells[i].classList.add('mine','open');
}
});
}

function checkWin(){
if(opened.size===ROWS*COLS-MINES_COUNT){
gameOver=true;
infoEl.textContent='ðŸŽ‰ You Win!';
points++;updatePointsInfo();
}
}

function reset(){
gameOver=false;firstClick=true;
flags.clear();opened.clear();
infoEl.textContent=`Flags: 0 / ${MINES_COUNT}`;
createGrid();bind();updatePointsInfo();
}

function bind(){
cells.forEach(c=>{
c.onclick=()=>flagMode?toggleFlag(+c.dataset.index):openCell(+c.dataset.index);
c.oncontextmenu=e=>{e.preventDefault();toggleFlag(+c.dataset.index);}
});
}

startBtn.onclick=()=>{
ROWS=COLS=+gridSizeInput.value;
MINES_COUNT=+bombCountInput.value;
reset();
};
resetBtn.onclick=reset;
modeToggleBtn.onclick=()=>{
flagMode=!flagMode;
modeToggleBtn.textContent=`Flag Mode: ${flagMode?'ON':'OFF'}`;
};
btnOpen.onclick=()=>flagMode=false;
btnFlag.onclick=()=>flagMode=true;

reset();
})();
</script>

</body>
</html>
