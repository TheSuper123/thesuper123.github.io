<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Block Blast â€“ SpinnerRealYT Games</title>
<link rel="icon" href="../Logo.png">

<style>
:root{
--bg:#020617;
--card:#0f172a;
--accent:#38bdf8;
--text:#e5e7eb;
}
*{box-sizing:border-box}
body{
margin:0;
font-family:Inter,system-ui,sans-serif;
background:radial-gradient(circle at top,#020617,#000);
color:var(--text);
}
header{
display:flex;
align-items:center;
gap:15px;
padding:15px 20px;
background:rgba(15,23,42,.9);
backdrop-filter:blur(10px);
position:sticky;
top:0;
z-index:100;
}
header img{height:42px}
nav button{
background:none;
border:none;
color:var(--text);
font-size:15px;
padding:8px 14px;
border-radius:10px;
cursor:pointer;
}
nav button:hover,
nav button.active{
background:rgba(56,189,248,.15);
color:var(--accent);
}
main{max-width:1100px;margin:auto;padding:25px}
.card{
background:linear-gradient(180deg,#0f172a,#020617);
border-radius:20px;
padding:20px;
box-shadow:0 20px 60px rgba(0,0,0,.6);
margin-bottom:25px;
}
h2{text-align:center}
footer{
text-align:center;
opacity:.6;
padding:25px 10px;
}

/* BLOCK BLAST */
#board{
display:grid;
grid-template-columns:repeat(9,40px);
grid-template-rows:repeat(9,40px);
gap:2px;
justify-content:center;
margin:20px auto;
position:relative;
}
.cell{
width:40px;
height:40px;
background:#334155;
border-radius:5px;
}
#next-blocks{
display:flex;
justify-content:center;
gap:15px;
margin-top:10px;
}
.block{
position:absolute;
pointer-events:none;
z-index:50;
opacity:.8;
}
#score{text-align:center;margin-top:10px;font-size:18px;font-weight:700;}
button{cursor:pointer;background:#020617;color:white;border:1px solid #334155;border-radius:10px;padding:6px 10px;margin:5px;}
</style>
</head>

<body>

<header>
<img src="../Logo.png" alt="SpinnerRealYT">
<nav id="nav"></nav>
</header>

<main>
<div class="card">
<h2>ðŸŸ¦ Block Blast 9Ã—9</h2>

<p style="text-align:center">PrzeciÄ…gnij klocek na planszÄ™ i uÅ‚Ã³Å¼ tak, Å¼eby wypeÅ‚niÄ‡ liniÄ™ lub kolumnÄ™.</p>

<div id="board"></div>

<div id="next-blocks"></div>

<div id="score">Punkty: 0</div>

<div style="text-align:center">
<button id="restart">Restart</button>
</div>

</div>
</main>

<footer>
Â© 2026 SpinnerRealYT Games
</footer>

<script>
/* MENU */
const games = [
  { file: "../index.html", name: "Menu" }
];

const nav = document.getElementById("nav");
const menuBtn = document.createElement("button");
menuBtn.textContent = "Menu";
menuBtn.classList.add("active");
menuBtn.onclick = () => location.href = "../index.html";
nav.appendChild(menuBtn);

games.forEach(g=>{
  const b=document.createElement("button");
  b.textContent=g.name;
  if(g.name==="Block Blast") b.classList.add("active");
  b.onclick=()=>location.href=g.file;
  nav.appendChild(b);
});
</script>

<script>
/* ===== LOGIKA ===== */

const ROWS=9, COLS=9;
const COLORS=["#2563eb","#16a34a","#dc2626","#f59e0b","#8b5cf6"];
const SHAPES=[
  [[1,1,1]],              // linia pozioma
  [[1],[1],[1]],          // linia pionowa
  [[1,1],[1,1]],          // kwadrat
  [[1,1,1],[0,1,0]],      // T
  [[1,1,0],[0,1,1]],      // S
  [[0,1,1],[1,1,0]],      // Z
];

const boardEl=document.getElementById("board");
const nextEl=document.getElementById("next-blocks");
const scoreEl=document.getElementById("score");
const restartBtn=document.getElementById("restart");

let board, score, nextShapes;
let currentDrag=null;

function init(){
  score=0;
  scoreEl.textContent="Punkty: "+score;
  board=Array.from({length:ROWS},()=>Array(COLS).fill(null));
  boardEl.innerHTML="";
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const cell=document.createElement("div");
      cell.className="cell";
      cell.dataset.r=r;
      cell.dataset.c=c;
      boardEl.appendChild(cell);
    }
  }
  generateNext();
}

function generateNext(){
  nextEl.innerHTML="";
  nextShapes=[];
  for(let i=0;i<3;i++){
    const shape=SHAPES[Math.floor(Math.random()*SHAPES.length)];
    const color=COLORS[Math.floor(Math.random()*COLORS.length)];
    const div=document.createElement("div");
    div.className="block";
    div.dataset.shape=JSON.stringify(shape);
    div.dataset.color=color;
    div.style.width=shape[0].length*40+"px";
    div.style.height=shape.length*40+"px";
    div.style.background=color;
    nextEl.appendChild(div);
    nextShapes.push({shape,color});
    makeDraggable(div,i);
  }
}

function makeDraggable(div,index){
  div.onmousedown=function(e){
    currentDrag={div,shape:nextShapes[index].shape,color:nextShapes[index].color};
    document.body.appendChild(div);
    moveAt(e.pageX,e.pageY);
    document.onmousemove=dragMove;
    div.style.opacity="1";
    div.style.pointerEvents="none";
  };
  document.onmouseup=function(){
    if(currentDrag){
      placeOnBoard(currentDrag);
      currentDrag.div.style.pointerEvents="auto";
      currentDrag=null;
      document.onmousemove=null;
    }
  };
}

function dragMove(e){
  if(!currentDrag) return;
  moveAt(e.pageX,e.pageY);
}

function moveAt(x,y){
  const {div,shape}=currentDrag;
  div.style.left=x- (shape[0].length*20) + "px";
  div.style.top=y- (shape.length*20) + "px";
}

function placeOnBoard({div,shape,color}){
  const boardRect=boardEl.getBoundingClientRect();
  const cx=event.clientX-boardRect.left;
  const cy=event.clientY-boardRect.top;
  const cellSize=boardRect.width/COLS;

  const col=Math.floor(cx/cellSize);
  const row=Math.floor(cy/cellSize);

  if(row>=0 && row<ROWS && col>=0 && col<COLS && canPlace(row,col,shape)){
    shape.forEach((rArr, dr)=>{
      rArr.forEach((cellVal, dc)=>{
        if(cellVal) board[row+dr][col+dc]=color;
      });
    });
    updateBoard();
    removeFull();
    scoreEl.textContent="Punkty: "+score;
    div.remove();
    nextShapes.shift();
    if(nextShapes.length===0) generateNext();
  } else {
    resetBlockPosition(div);
  }
}

function resetBlockPosition(div){
  nextEl.appendChild(div);
  div.style.position="relative";
  div.style.left="0";
  div.style.top="0";
}

function canPlace(r,c,shape){
  for(let dr=0; dr<shape.length; dr++){
    for(let dc=0; dc<shape[dr].length; dc++){
      if(shape[dr][dc]){
        if(r+dr>=ROWS||c+dc>=COLS||board[r+dr][c+dc]) return false;
      }
    }
  }
  return true;
}

function updateBoard(){
  [...boardEl.children].forEach(cell=>{
    const r=parseInt(cell.dataset.r);
    const c=parseInt(cell.dataset.c);
    cell.style.background=board[r][c] || "#334155";
  });
}

function removeFull(){
  let lines=0;
  // wiersze
  for(let r=0;r<ROWS;r++){
    if(board[r].every(v=>v)){
      lines++;
      board[r]=Array(COLS).fill(null);
    }
  }
  // kolumny
  for(let c=0;c<COLS;c++){
    if(board.every(row=>row[c])){
      lines++;
      for(let r=0;r<ROWS;r++) board[r][c]=null;
    }
  }
  score += lines*10;
  updateBoard();
}

init();
restartBtn.onclick=init;

</script>

</body>
</html>
