<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SpinnerRealYT Games - Block Blast</title>
<link rel="icon" href="Logo.png">
<style>
:root{
--bg:#020617;
--card:#0f172a;
--accent:#38bdf8;
--text:#e5e7eb;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
font-family:Inter,system-ui,sans-serif;
background:radial-gradient(circle at top,#020617,#000);
color:var(--text);
}
header{
display:flex;
align-items:center;
gap:15px;
padding:15px 20px;
background:rgba(15,23,42,.9);
backdrop-filter:blur(10px);
position:sticky;
top:0;
z-index:100;
}
header img{height:42px;cursor:pointer}
nav button{
background:none;
border:none;
color:var(--text);
font-size:15px;
padding:8px 14px;
border-radius:10px;
cursor:pointer;
}
nav button:hover, nav button.active{
background:rgba(56,189,248,.15);
color:var(--accent);
}
main{
max-width:1100px;
margin:auto;
padding:25px;
display:flex;
flex-direction:column;
align-items:center;
}
.card{
background:linear-gradient(180deg,#0f172a,#020617);
border-radius:20px;
padding:20px;
box-shadow:0 20px 60px rgba(0,0,0,.6);
margin-bottom:25px;
text-align:center;
}
h1,h2{text-align:center;margin-bottom:15px;}
footer{
text-align:center;
opacity:.6;
padding:25px 10px;
}

/* ===== BLOCK BLAST STYLES ===== */
#board-container{
display:flex;
justify-content:center;
margin:20px 0;
}
#board{
display:grid;
grid-template-columns:repeat(9,42px);
grid-template-rows:repeat(9,42px);
gap:2px;
background:#020617;
padding:5px;
border-radius:10px;
}
.cell{
width:42px;height:42px;
background:#334155;
border-radius:5px;
}
.cell.filled{
background:#38bdf8;
}

/* NEXT BLOCKS */
#nextBlocks{
display:flex;
justify-content:center;
gap:10px;
margin-top:15px;
}
.block{
display:grid;
gap:2px;
cursor:pointer;
}
.block .cell{
width:30px;height:30px;
background:#38bdf8;
border-radius:3px;
}
#score{
margin-top:15px;font-size:18px;
}
.dragging{
position:absolute;
pointer-events:none;
opacity:0.7;
z-index:1000;
}
</style>
</head>
<body>

<header>
<img src="Logo.png" alt="SpinnerRealYT" onclick="window.location.href='https://spinnerrealyt.pl'">
<nav id="nav"></nav>
</header>

<main>
<div class="card">
<h1>ðŸŽ® Block Blast</h1>
<p>UmieÅ›Ä‡ klocki na planszy tak, aby czyÅ›ciÄ‡ linie i zdobywaÄ‡ punkty!</p>

<div id="board-container">
<div id="board"></div>
</div>

<div id="nextBlocks"></div>
<div id="score">Punkty: 0</div>
</div>
</main>

<footer>
Â© 2026 SpinnerRealYT Games
</footer>

<script>
/* ===== MENU ===== */
const nav = document.getElementById("nav");
const menuBtn = document.createElement("button");
menuBtn.textContent = "Menu";
menuBtn.classList.add("active");
menuBtn.onclick = () => window.location.href = "https://spinnerrealyt.pl";
nav.appendChild(menuBtn);

/* ===== GAME LOGIC ===== */
const ROWS=9,COLS=9;
const board=document.getElementById("board");
const nextBlocks=document.getElementById("nextBlocks");
let score=0;

// KsztaÅ‚ty blokÃ³w
const SHAPES = [
[[1,1],[0,1],[0,0]], // L
[[1,1,1,1]], // linia
[[1,1],[1,1]], // kwadrat
[[0,1,1],[1,1,0]], // Z
[[1,1,0],[0,1,1]], // S
[[1,0],[1,1],[1,0]] // T
];

let boardData = Array.from({length:ROWS},()=>Array(COLS).fill(0));

function drawBoard(){
board.innerHTML='';
for(let r=0;r<ROWS;r++){
for(let c=0;c<COLS;c++){
const cell=document.createElement("div");
cell.className="cell"+(boardData[r][c]? " filled":"");
board.appendChild(cell);
}
}
}

function generateBlock(){
const shape=SHAPES[Math.floor(Math.random()*SHAPES.length)];
return shape.map(r=>[...r]);
}

function drawNextBlocks(){
nextBlocks.innerHTML='';
for(let i=0;i<3;i++){
const shape=generateBlock();
const div=document.createElement("div");
div.className="block";
div.dataset.index=i;
div.dataset.shape=JSON.stringify(shape);
div.style.gridTemplateColumns=`repeat(${shape[0].length},30px)`;
div.style.gridTemplateRows=`repeat(${shape.length},30px)`;
shape.forEach(row=>{
row.forEach(cell=>{
const c=document.createElement("div");
c.className="cell";
if(cell)c.style.background="#38bdf8";
div.appendChild(c);
});
});
nextBlocks.appendChild(div);

makeDraggable(div);
}
}

function makeDraggable(div){
let clone=null;
let offsetX=0,offsetY=0;

div.addEventListener("mousedown",startDrag);
div.addEventListener("touchstart",startDrag);

function startDrag(e){
e.preventDefault();
const shape=JSON.parse(div.dataset.shape);
clone=div.cloneNode(true);
clone.classList.add("dragging");
document.body.appendChild(clone);

const rect=div.getBoundingClientRect();
if(e.touches){
offsetX=e.touches[0].clientX-rect.left;
offsetY=e.touches[0].clientY-rect.top;
document.addEventListener("touchmove",drag);
document.addEventListener("touchend",drop);
}else{
offsetX=e.clientX-rect.left;
offsetY=e.clientY-rect.top;
document.addEventListener("mousemove",drag);
document.addEventListener("mouseup",drop);
}

function drag(ev){
let clientX=ev.clientX||ev.touches[0].clientX;
let clientY=ev.clientY||ev.touches[0].clientY;
clone.style.left=clientX-offsetX+"px";
clone.style.top=clientY-offsetY+"px";
}
function drop(ev){
let clientX=ev.clientX||ev.changedTouches[0].clientX;
let clientY=ev.clientY||ev.changedTouches[0].clientY;
document.removeEventListener("mousemove",drag);
document.removeEventListener("mouseup",drop);
document.removeEventListener("touchmove",drag);
document.removeEventListener("touchend",drop);

// Oblicz rzÄ…d/kolumnÄ™
const boardRect=board.getBoundingClientRect();
const x=clientX-boardRect.left;
const y=clientY-boardRect.top;
const col=Math.floor(x/44); // 42px+2px gap
const row=Math.floor(y/44);

const shapeHeight=shape.length;
const shapeWidth=shape[0].length;

// Sprawdzenie czy moÅ¼na wstawiÄ‡
let canPlace=true;
for(let r=0;r<shapeHeight;r++){
for(let c=0;c<shapeWidth;c++){
if(shape[r][c]){
let br=row+r;
let bc=col+c;
if(br<0||br>=ROWS||bc<0||bc>=COLS||boardData[br][bc]){
canPlace=false;
}
}
}
}

if(canPlace){
// wstawienie
for(let r=0;r<shapeHeight;r++){
for(let c=0;c<shapeWidth;c++){
if(shape[r][c]) boardData[row+r][col+c]=1;
}
score+=1;
document.getElementById("score").textContent="Punkty: "+score;
drawBoard();
drawNextBlocks();
}
clone.remove();
else clone.remove();
}
}
}

drawBoard();
drawNextBlocks();
</script>

</body>
</html>
