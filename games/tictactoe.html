<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>K√≥≈Çko i Krzy≈ºyk ‚Äì SpinnerRealYT Games</title>

<link rel="icon" type="image/png" href="../Logo.png?v=2">
<link rel="apple-touch-icon" href="../Logo.png?v=2">

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --accent:#38bdf8;
  --text:#e5e7eb;
  --cell-size: clamp(65px, 25vw, 120px);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:radial-gradient(circle at top,#020617,#000);
  color:var(--text);
  overflow-x: hidden;
}
header{
  display:flex; align-items:center; justify-content: space-between;
  padding:10px 20px; background:rgba(15,23,42,.9);
  backdrop-filter:blur(10px); position:sticky; top:0; z-index:100;
}
header img{height:32px}

nav button{
  background:rgba(56,189,248,.1); border:1px solid var(--accent);
  color:var(--text); padding:6px 15px; border-radius:8px; cursor:pointer;
}

main{ max-width:600px; margin:auto; padding:15px; }
.card{
  background:linear-gradient(180deg,#0f172a,#020617);
  border-radius:24px; padding:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
  border: 1px solid rgba(255,255,255,0.05);
}
h2{text-align:center; margin-top:0; color: var(--accent);}

#controls {
  display: flex; flex-direction: column; align-items: center; gap: 10px; margin-bottom: 20px;
}
.row-ctrl { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: center; }

select, button#restart {
  background:#1e293b; color:white; border:1px solid #334155;
  border-radius:10px; padding:8px 12px; cursor:pointer;
}
button#restart { background: var(--accent); color: #020617; font-weight: bold; border: none; }

#board{
  display:grid;
  grid-template-columns: repeat(3, var(--cell-size));
  gap:12px;
  justify-content:center;
  margin:20px auto;
}
.cell{
  width: var(--cell-size);
  height: var(--cell-size);
  background:#1e293b;
  display:flex; align-items:center; justify-content:center;
  font-size: calc(var(--cell-size) * 0.5);
  font-weight:700; cursor:pointer; border-radius:15px;
  user-select:none; transition: 0.2s;
  border: 1px solid rgba(255,255,255,0.05);
}
.cell:active { transform: scale(0.95); }
.cell.x-color { color: var(--accent); }
.cell.o-color { color: #f87171; }

#status{
  text-align:center; font-size: 1.3rem; font-weight: 600; min-height: 1.6em;
  padding: 10px; border-radius: 10px;
}

footer{ text-align:center; opacity:.6; padding:25px 10px; font-size: 12px; }
</style>
</head>

<body>

<header>
  <img src="../Logo.png" alt="SpinnerRealYT">
  <nav><button onclick="location.href='../index.html'">Menu</button></nav>
</header>

<main>
  <div class="card">
    <h2>‚ùå‚≠ï K√≥≈Çko i Krzy≈ºyk</h2>

    <div id="controls">
      <div class="row-ctrl">
        <span>Tryb:</span>
        <select id="difficulty">
          <option value="pvp">üë• 2 Graczy (Lokalnie)</option>
          <option value="amator">ü§ñ AI: Amator</option>
          <option value="easy">ü§ñ AI: ≈Åatwy</option>
          <option value="medium">ü§ñ AI: ≈öredni</option>
          <option value="hard">ü§ñ AI: Trudny</option>
        </select>
      </div>
      <button id="restart">Nowa Gra</button>
    </div>

    <div id="board"></div>
    <div id="status">Zaczyna Gracz 1 (‚ùå)</div>
  </div>
</main>

<footer>¬© 2026 SpinnerRealYT Games</footer>

<script>
const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const restartBtn = document.getElementById("restart");
const difficultySelect = document.getElementById("difficulty");

let board, gameOver, currentPlayer;

function init(){
  board = Array(9).fill(null);
  gameOver = false;
  currentPlayer = "X"; 
  boardEl.innerHTML="";
  updateStatus();
  
  for(let i=0;i<9;i++){
    const cell=document.createElement("div");
    cell.className="cell";
    cell.onclick=()=>makeMove(i);
    boardEl.appendChild(cell);
  }
}

function updateStatus() {
  if (gameOver) return;
  const isPvP = difficultySelect.value === "pvp";
  
  if (currentPlayer === "X") {
    statusEl.textContent = isPvP ? "Tura: Gracz 1 (‚ùå)" : "Tw√≥j ruch (‚ùå)";
    statusEl.style.color = "var(--accent)";
  } else {
    statusEl.textContent = isPvP ? "Tura: Gracz 2 (‚≠ï)" : "Ruch AI (‚≠ï)";
    statusEl.style.color = "#f87171";
  }
}

function makeMove(i){
  if(gameOver || board[i]) return;
  
  board[i] = currentPlayer;
  render();
  
  if(checkWin(currentPlayer)){
    const isPvP = difficultySelect.value === "pvp";
    const winner = currentPlayer === "X" ? (isPvP ? "Gracz 1 (‚ùå)" : "Wygra≈Çe≈õ!") : (isPvP ? "Gracz 2 (‚≠ï)" : "AI Wygra≈Ço!");
    return end(`üéâ ${winner} wygrywa!`);
  }
  
  if(board.every(Boolean)) return end("ü§ù Remis!");

  currentPlayer = currentPlayer === "X" ? "O" : "X";
  updateStatus();

  // Je≈õli nie PvP i kolej na "O", wykonaj ruch AI
  if (difficultySelect.value !== "pvp" && currentPlayer === "O") {
    setTimeout(aiTurn, 500);
  }
}

function aiTurn(){
  if(gameOver) return;
  const move = getAIMove();
  board[move] = "O";
  render();
  
  if(checkWin("O")) return end("üíÄ Przegra≈Çe≈õ!");
  if(board.every(Boolean)) return end("ü§ù Remis!");
  
  currentPlayer = "X";
  updateStatus();
}

function getAIMove(){
  const level = difficultySelect.value;
  const empty = board.map((v,i)=>v?null:i).filter(v=>v!==null);

  if(level==="amator") return empty[Math.floor(Math.random()*empty.length)];
  if(level==="easy" && Math.random()<0.5) return empty[Math.floor(Math.random()*empty.length)];
  
  if(level==="medium" || level==="hard"){
    const win = findWinningMove("O") ?? findWinningMove("X");
    if(win!==null) return win;
  }

  if(level==="hard") return minimax(board, "O").index;

  return empty[Math.floor(Math.random()*empty.length)];
}

function findWinningMove(p){
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]=p;
      if(checkWin(p)){board[i]=null;return i;}
      board[i]=null;
    }
  }
  return null;
}

function minimax(b, player){
  const empty = b.map((v,i)=>v?null:i).filter(v=>v!==null);
  if(checkStatic(b, "X")) return {score:-10};
  if(checkStatic(b, "O")) return {score:10};
  if(empty.length===0) return {score:0};

  let moves=[];
  for(let i of empty){
    b[i]=player;
    const res = minimax(b, player==="O"?"X":"O");
    moves.push({index:i, score:res.score});
    b[i]=null;
  }

  return player==="O"
    ? moves.reduce((a,b)=>b.score>a.score?b:a)
    : moves.reduce((a,b)=>b.score<a.score?b:a);
}

function checkWin(p){ return checkStatic(board, p); }
function checkStatic(b, p){
  const w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return w.some(c=>c.every(i=>b[i]===p));
}

function render(){
  const cells = boardEl.children;
  board.forEach((val, i) => {
    cells[i].textContent = val || "";
    if(val === "X") cells[i].className = "cell x-color";
    if(val === "O") cells[i].className = "cell o-color";
  });
}

function end(msg){
  gameOver = true;
  statusEl.textContent = msg;
  statusEl.style.color = msg.includes("Remis") ? "#e5e7eb" : (currentPlayer === "X" ? "var(--accent)" : "#f87171");
}

restartBtn.onclick = init;
init();
</script>

</body>
</html>
