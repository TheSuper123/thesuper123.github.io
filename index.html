<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SpinnerRealYT Games</title>
<style>
  body {
    background: #1b1b1b;
    color: #fff;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 0;
  }

  header {
    background: #222;
    padding: 10px 0;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    letter-spacing: 1px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
  }

  nav {
    display: flex;
    justify-content: center;
    background: #333;
    padding: 10px 0;
    gap: 10px;
    flex-wrap: wrap;
  }

  nav button {
    background: #555;
    color: #fff;
    border: none;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: 0.2s;
  }

  nav button:hover {
    background: #ffcc00;
    color: #000;
  }

  .game-container {
    display: none;
    padding: 20px;
    text-align: center;
  }

  /* ------------------- SAPER ------------------- */
  #game {
    display: grid;
    justify-content: center;
    margin: 10px auto;
    gap: 1px;
    background: #555;
    touch-action: none;
  }

  .cell {
    background: #888;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
  }

  .open { background: #ccc; }
  .mine { background: #f00; color: white; }
  .flagged { background: #ff0; }
  .number1 { color: blue; } .number2 { color: green; } .number3 { color: red; } .number4 { color: navy; }
  .number5 { color: brown; } .number6 { color: teal; } .number7 { color: black; } .number8 { color: gray; }

  #menu {
    padding: 10px;
    background: #333;
    margin-bottom: 10px;
    border-radius: 8px;
  }

  input { width: 60px; padding: 3px; margin: 3px; text-align: center; }
  button.control-btn { padding: 5px 10px; margin: 3px; font-size: 14px; }

  #info, #points-info { margin-top: 5px; }

  #controls { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; }

  /* ------------------- QUIZ ------------------- */
  .quiz-question {
    background: #222;
    padding: 15px;
    margin: 10px auto;
    border-radius: 8px;
    max-width: 700px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
  }

  .quiz-buttons button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 14px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #555;
    color: #fff;
    transition: 0.2s;
  }

  .quiz-buttons button:hover {
    background: #ffcc00;
    color: #000;
  }

  /* ------------------- SONDARZE ------------------- */
  #sondaze h2 {
    color: #ffcc00;
    font-size: 28px;
    margin-bottom: 10px;
  }

  #sondaze p {
    color: #eee;
    font-size: 16px;
    margin-bottom: 20px;
  }

  #sondaze .flourish-embed {
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    max-width: 900px;
    margin: 0 auto;
  }

  footer {
    text-align: center;
    padding: 15px;
    background: #222;
    margin-top: 20px;
    font-size: 14px;
    color: #ffcc00;
  }

</style>
</head>
<body>

<header>SpinnerRealYT Games</header>

<nav>
  <button onclick="showGame('saper')">Saper</button>
  <button onclick="showGame('quiz')">Quiz Polityczny</button>
  <button onclick="showGame('sondaze')">Sonda偶e</button>
</nav>

<!-- ================= SAPER ================= -->
<div id="saper" class="game-container">
  <div id="menu">
    Rozmiar: <input type="number" id="grid-size" value="9" min="5" max="100">
    Bomby: <input type="number" id="bomb-count" value="10" min="5">
    <button id="start-btn" class="control-btn">Start Game</button>
    <button id="reset-btn" class="control-btn">Reset</button>
    <button id="mode-toggle" class="control-btn">Flag Mode: OFF</button>
    <button id="hint-btn" class="control-btn">Hint (1 free)</button>
    <div id="info">Flags: 0 / 0</div>
    <div id="points-info">Points: 0 | Hints: 1</div>
  </div>

  <div id="game"></div>

  <div id="controls">
    <button id="btn-open" class="control-btn">Otw贸rz</button>
    <button id="btn-flag" class="control-btn">Flaga</button>
  </div>
</div>

<!-- ================= QUIZ ================= -->
<div id="quiz" class="game-container">
  <div id="quiz-container"></div>
  <div id="quiz-result" style="margin-top:20px; font-size:18px;"></div>
</div>

<!-- ================= SONDARZE ================= -->
<div id="sondaze" class="game-container">
  <h2>Sonda偶e partii</h2>
  <p>Poni偶ej znajdziesz aktualne poparcie partii:</p>
  <div class="flourish-embed flourish-chart" data-src="visualisation/27035462">
    <script src="https://public.flourish.studio/resources/embed.js"></script>
    <noscript>
      <img src="https://public.flourish.studio/visualisation/27035462/thumbnail" width="100%" alt="chart visualization" />
    </noscript>
  </div>
</div>

<footer>2026 SpinnerRealYT Games</footer>

<script>
// ----------------------- MENU -----------------------
function showGame(id){
  document.querySelectorAll('.game-container').forEach(c=>c.style.display='none');
  document.getElementById(id).style.display='block';
}

// ----------------------- SAPER -----------------------
(() => {
  let ROWS = 9, COLS = 9, MINES_COUNT = 10;
  const gameEl = document.getElementById('game');
  const infoEl = document.getElementById('info');
  const modeToggleBtn = document.getElementById('mode-toggle');
  const resetBtn = document.getElementById('reset-btn');
  const startBtn = document.getElementById('start-btn');
  const gridSizeInput = document.getElementById('grid-size');
  const bombCountInput = document.getElementById('bomb-count');
  const btnOpen = document.getElementById('btn-open');
  const btnFlag = document.getElementById('btn-flag');
  const hintBtn = document.getElementById('hint-btn');
  const pointsInfoEl = document.getElementById('points-info');

  let cells = [];
  let minePositions = new Set();
  let flags = new Set();
  let opened = new Set();
  let gameOver = false;
  let flagMode = false;
  let firstClick = true;
  let points = 0;
  let hints = 1;

  function updatePointsInfo() {
    pointsInfoEl.textContent = `Points: ${points} | Hints: ${hints}`;
  }

  function createGrid() {
    gameEl.innerHTML = '';
    cells = [];
    const availableWidth = window.innerWidth - 20;
    const availableHeight = window.innerHeight - 150;
    const cellSize = Math.floor(Math.min(availableWidth / COLS, availableHeight / ROWS));
    gameEl.style.gridTemplateColumns = `repeat(${COLS}, ${cellSize}px)`;
    gameEl.style.gridTemplateRows = `repeat(${ROWS}, ${cellSize}px)`;
    for(let i=0;i<ROWS*COLS;i++){
      const cell=document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.index=i;
      cell.style.fontSize=`${Math.floor(cellSize*0.6)}px`;
      cell.style.width=`${cellSize}px`;
      cell.style.height=`${cellSize}px`;
      gameEl.appendChild(cell);
      cells.push(cell);
    }
  }

  function placeMines(firstIndex) {
    minePositions.clear();
    while(minePositions.size < MINES_COUNT){
      const pos = Math.floor(Math.random()*ROWS*COLS);
      if(pos===firstIndex || neighbors(firstIndex).includes(pos)) continue;
      minePositions.add(pos);
    }
  }

  function neighbors(index) {
    const n=[];
    const r=Math.floor(index/COLS);
    const c=index%COLS;
    for(let dr=-1;dr<=1;dr++){
      for(let dc=-1;dc<=1;dc++){
        if(dr===0 && dc===0) continue;
        const nr=r+dr;
        const nc=c+dc;
        if(nr>=0 && nr<ROWS && nc>=0 && nc<COLS){
          n.push(nr*COLS+nc);
        }
      }
    }
    return n;
  }

  function countMines(index) {
    return neighbors(index).filter(n=>minePositions.has(n)).length;
  }

  function openCell(index){
    if(gameOver||opened.has(index)||flags.has(index)) return;
    if(firstClick){ firstClick=false; placeMines(index);}
    opened.add(index);
    const cell=cells[index];
    if(minePositions.has(index)){
      cell.classList.add('mine','open');
      cell.textContent="";
      return loseGame();
    }
    const count=countMines(index);
    cell.classList.add('open');
    if(count>0){ cell.textContent=count; cell.classList.add(`number${count}`); }
    else{ neighbors(index).forEach(openCell); }
    checkWin();
  }

  function toggleFlag(index){
    if(gameOver||opened.has(index)) return;
    const cell=cells[index];
    if(flags.has(index)){ flags.delete(index); cell.classList.remove('flagged'); cell.textContent=''; }
    else { if(flags.size>=MINES_COUNT) return; flags.add(index); cell.classList.add('flagged'); cell.textContent=""; }
    infoEl.textContent=`Flags: ${flags.size} / ${MINES_COUNT}`;
    checkWin();
  }

  function checkWin(){
    if(gameOver) return;
    if(opened.size===ROWS*COLS-MINES_COUNT){ winGame(); }
  }

  function loseGame(){
    gameOver=true;
    infoEl.textContent=" Game Over!";
    minePositions.forEach(i=>{
      if(!opened.has(i)){
        const cell=cells[i];
        cell.classList.add('mine','open'); cell.textContent="";
      }
    });
  }

  function winGame(){ gameOver=true; infoEl.textContent=" You Win!"; points++; updatePointsInfo(); }

  function resetGame(){
    gameOver=false; firstClick=true; flags.clear(); opened.clear(); infoEl.textContent="Flags: 0 / 0"; createGrid(); setupEvents(); updatePointsInfo();
  }

  function useHint() {
    if(hints<=0){ alert("Brak hint贸w!"); return; }
    hints--;
    const safe=cells.map((c,i)=>i).filter(i=>!minePositions.has(i)&&!opened.has(i)&&!flags.has(i));
    if(safe.length===0){ alert("Brak bezpiecznych p贸l."); return; }
    openCell(safe[Math.floor(Math.random()*safe.length)]);
    updatePointsInfo();
  }

  function buyHint(){ if(points<=0){ alert("Nie masz punkt贸w!"); return; } points--; hints++; updatePointsInfo(); }

  hintBtn.onclick=()=>{ if(hints>0) useHint(); else if(confirm("Kup hint za 1 punkt?")) buyHint(); };

  function setupEvents(){ cells.forEach(cell=>{ cell.onclick=()=>flagMode?toggleFlag(+cell.dataset.index):openCell(+cell.dataset.index); cell.oncontextmenu=e=>{ e.preventDefault(); toggleFlag(+cell.dataset.index); }; }); }

  gridSizeInput.addEventListener('input',()=>{ const size=Math.max(5,Math.min(100,+gridSizeInput.value)); const maxBombs=Math.floor((size*size)/2); bombCountInput.min=5; bombCountInput.max=maxBombs; if(+bombCountInput.value>maxBombs) bombCountInput.value=maxBombs; });

  startBtn.onclick=()=>{ const size=Math.max(5,Math.min(100,+gridSizeInput.value)); const bombs=+bombCountInput.value; if(bombs<5||bombs>Math.floor((size*size)/2)){ alert("Za du偶o bomb"); return; } ROWS=COLS=size; MINES_COUNT=bombs; resetGame(); };

  modeToggleBtn.onclick=()=>{ flagMode=!flagMode; modeToggleBtn.textContent=`Flag Mode: ${flagMode?'ON':'OFF'}`; };
  resetBtn.onclick=resetGame; btnOpen.onclick=()=>flagMode=false; btnFlag.onclick=()=>flagMode=true;

  resetGame();
})();

// ----------------------- QUIZ -----------------------
(() => {
  const questions = [
    {q:"Partia A powinna rzdzi?", p:"Koalicja Obywatelska"},
    {q:"Partia B powinna rzdzi?", p:"Prawo i Sprawiedliwo"},
    {q:"Partia C powinna rzdzi?", p:"Konfederacja"},
    {q:"Partia D powinna rzdzi?", p:"Lewica"},
    {q:"Partia E powinna rzdzi?", p:"Konfederacja Korony Polskiej"},
    {q:"Partia F powinna rzdzi?", p:"Razem"},
    {q:"Partia G powinna rzdzi?", p:"Polskie Stronnictwo Ludowe"},
    {q:"Partia H powinna rzdzi?", p:"Polska 2050"}
    // dodaj reszt do 35 pyta w tym samym formacie
  ];

  let current=0;
  const results={}; questions.forEach(q=>results[q.p]=0);

  const quizContainer=document.getElementById('quiz-container');
  const quizResult=document.getElementById('quiz-result');

  function showQuestion(){
    if(current>=questions.length){ showFinal(); return; }
    const q=questions[current];
    quizContainer.innerHTML=`<div class="quiz-question">${current+1}. ${q.q}</div>
      <div class="quiz-buttons">
        <button onclick="answer('yes')">Popieram</button>
        <button onclick="answer('no')">Nie popieram</button>
        <button onclick="answer('none')">Nie mam zdania</button>
      </div>`;
  }

  window.answer=(a)=>{
    const p=questions[current].p;
    if(a==='yes') results[p]+=2;
    else if(a==='none') results[p]+=1;
    current++;
    showQuestion();
  };

  function showFinal(){
    let maxScore=-1, winner='';
    for(const k in results){ if(results[k]>maxScore){ maxScore=results[k]; winner=k; } }
    quizContainer.style.display='none';
    quizResult.textContent=`Twoja partia: ${winner}`;
  }

  showQuestion();
})();
</script>

</body>
</html>
